<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>OpenWhisperAI Settings (dev)</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="hero">
        <div>
          <p class="eyebrow">OpenWhisperAI</p>
          <h1>Push-to-talk dictation.</h1>
          <p class="subtitle">Record, stop, and adjust the hotkey. Nothing else.</p>
          <div class="chip" id="uiBuild">UI build: pending</div>
          <div class="chip" id="ipcStatus">IPC: unknown</div>
          <div class="chip" id="pttStatus">PTT: idle</div>
        </div>
      </header>

      <main class="grid single">
        <section class="panel" id="recording">
          <div class="panel-header">
            <h2>Recording</h2>
            <p id="recordingHint">Press the hotkey to start/stop.</p>
          </div>
          <div class="panel-body">
            <div class="control-buttons">
              <button class="button primary" id="startRecording" type="button">Start Recording</button>
              <button class="button ghost" id="stopRecording" type="button" disabled>Stop Recording</button>
            </div>
            <div class="transcript-output" id="transcriptOutput" aria-live="polite">
              Latest transcript will appear here.
            </div>
          </div>
        </section>

        <section class="panel" id="hotkey">
          <div class="panel-header">
            <h2>Push-to-talk Hotkey</h2>
            <p>Click the field and press the shortcut. On Hyprland, use the setup script to bind it globally.</p>
          </div>
          <div class="panel-body">
            <div class="hotkey-row-simple">
              <input class="input" id="hotkeyInput" type="text" placeholder="Press shortcut" readonly />
              <button class="button" id="applyHotkey" type="button">Apply Hotkey</button>
            </div>
            <div class="hotkey-preview" id="hotkeyPreview">Current: Ctrl + Alt + Space</div>
          </div>
        </section>
      </main>
    </div>
    <script>
      (function () {
        var stamp = new Date().toISOString();
        var uiBuild = document.getElementById("uiBuild");
        if (uiBuild) uiBuild.textContent = "UI build: " + stamp;
      })();
    </script>
    <script>
      (async function () {
        var hint = document.getElementById("recordingHint");
        try {
          await import("./main.js");
          if (hint) hint.textContent = "UI ready";
        } catch (err) {
          if (hint) {
            hint.textContent =
              "main.js failed: " + (err && err.message ? err.message : err);
          }
        }
      })();
    </script>
  </body>
</html>
